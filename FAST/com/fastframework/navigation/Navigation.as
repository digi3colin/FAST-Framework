package com.fastframework.navigation {	import com.fastframework.core.FASTEventDispatcher;	import com.fastframework.core.IFASTEventDispatcher;	import com.fastframework.core.SingletonError;	/**	 * @author colin	 */	final public class Navigation extends FASTEventDispatcher implements IFASTEventDispatcher{		private static var ins:Navigation;		public static function instance():Navigation {			return ins || new Navigation();		}		private var navKey : String;		private var navStackRequests:Array;			public function Navigation() {			if(ins!=null)throw new SingletonError(this);			ins = this;		}		public function changeSection(navKey:String,targetContainer:String=null,isSuppress:Boolean=false,eventDispatcher:Object=null):void{			this.navKey = navKey;			navStackRequests = null;			dispatchEvent(new NavigationEvent(NavigationEvent.CHANGE,navKey,targetContainer,isSuppress,eventDispatcher,false,true));		}		public function changeSections(navStackRequests:Array):void{			this.navKey = NavStackRequest(navStackRequests[navStackRequests.length-1]).navKey;			this.navStackRequests = navStackRequests;			nextSection();		}		public function getNavKey() : String {			return navKey;		}		public function getNavStackRequests():Array{			return navStackRequests;		}		public function nextSection() : void {			if(navStackRequests.length<=0){				navStackRequests=null;				return;			}			var req:NavStackRequest = NavStackRequest(navStackRequests.shift());			dispatchEvent(new NavigationEvent(NavigationEvent.CHANGE,req.navKey,req.targetContainer,req.isSuppress,req.eventDispatcher,false,true));		}	}}